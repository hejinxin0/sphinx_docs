# 3Däººä½“æ¨¡å‹

## SMPL-X äººä½“æ¨¡å‹

### å®Œæ•´ SMPL-X å‚æ•°åˆ—è¡¨

æ—‹æ—‹è½¬å‡ä¸ºè½´è§’è¡¨ç¤º

| å‚æ•°å            | ç»´åº¦        | å«ä¹‰                               |
| ----------------- | ----------- | ---------------------------------- |
| `transl`          | (1, 3)      | å…¨å±€å¹³ç§»ï¼ˆRoot Jointï¼Œæ ¹å…³èŠ‚ä½ç½®ï¼‰ |
| `global_orient`   | (1, 3)      | å…¨å±€æ—‹è½¬ï¼ˆRoot Jointï¼Œæ ¹å…³èŠ‚æ—‹è½¬ï¼‰ |
| `body_pose`       | (21, 3)     | èº«ä½“å§¿æ€ï¼ˆä¸åŒ…æ‹¬æ ¹å…³èŠ‚æ—‹è½¬ï¼‰       |
| `left_hand_pose`  | (15, 3)     | å·¦æ‰‹å…³èŠ‚å§¿æ€                       |
| `right_hand_pose` | (15, 3)     | å³æ‰‹å…³èŠ‚å§¿æ€                       |
| `jaw_pose`        | (1, 3)      | ä¸‹é¢Œå§¿æ€ï¼ˆæ§åˆ¶å˜´éƒ¨è¿åŠ¨ï¼‰           |
| `leye_pose`       | (1, 3)      | å·¦çœ¼çƒå§¿æ€                         |
| `reye_pose`       | (1, 3)      | å³çœ¼çƒå§¿æ€                         |
| `expression`      | (10,)       | é¢éƒ¨è¡¨æƒ…å‚æ•°ï¼ˆæ§åˆ¶å¾®ç¬‘ã€çš±çœ‰ç­‰ï¼‰   |
| `betas`           | (10 æˆ– 300) | äººä½“å½¢çŠ¶å‚æ•°ï¼ˆæ§åˆ¶èƒ–ç˜¦ã€èº«é«˜ç­‰ï¼‰   |



```python
import pickle
import numpy as np

# 1. è¯»å–æ¨¡å‹æ–‡ä»¶
with open('SMPLX_MALE.pkl', 'rb') as f:
    smplx_male = pickle.load(f, encoding='latin1')  # ä½¿ç”¨ latin1 é¿å… Python 2/3 ä¸å…¼å®¹

# 2. æŸ¥çœ‹å­—å…¸ç»“æ„
print("Keys in SMPLX_MALE.pkl:")
for key in smplx_male.keys():
    val = smplx_male[key]
    print(f"{key}: {type(val)}, shape={getattr(val, 'shape', 'N/A')}")
    
dynamic_lmk_bary_coords: <class 'list'>, shape=N/A
hands_componentsl: <class 'numpy.ndarray'>, shape=(45, 45)
ft: <class 'numpy.ndarray'>, shape=(20908, 3)
lmk_faces_idx: <class 'numpy.ndarray'>, shape=(51,)
f: <class 'numpy.ndarray'>, shape=(20908, 3)
J_regressor: <class 'numpy.ndarray'>, shape=(55, 10475)
hands_componentsr: <class 'numpy.ndarray'>, shape=(45, 45)
kintree_table: <class 'numpy.ndarray'>, shape=(2, 55)
hands_coeffsr: <class 'numpy.ndarray'>, shape=(1554, 45)
joint2num: <class 'numpy.ndarray'>, shape=()
hands_meanl: <class 'numpy.ndarray'>, shape=(45,)
lmk_bary_coords: <class 'numpy.ndarray'>, shape=(51, 3)
weights: <class 'numpy.ndarray'>, shape=(10475, 55)
posedirs: <class 'numpy.ndarray'>, shape=(10475, 3, 486)
dynamic_lmk_faces_idx: <class 'numpy.ndarray'>, shape=(79, 17)
part2num: <class 'numpy.ndarray'>, shape=()
vt: <class 'numpy.ndarray'>, shape=(11313, 2)
hands_meanr: <class 'numpy.ndarray'>, shape=(45,)
hands_coeffsl: <class 'numpy.ndarray'>, shape=(1554, 45)
v_template: <class 'numpy.ndarray'>, shape=(10475, 3)
shapedirs: <class 'numpy.ndarray'>, shape=(10475, 3, 400)
```



### å½¢çŠ¶å‚æ•°ï¼ˆShape Parametersï¼‰

- **Î²ï¼ˆbetasï¼‰**: ç»´åº¦ä¸º **(10,)** æˆ– **(300,)**ï¼Œè¡¨ç¤ºäººä½“çš„ä½“å‹å˜åŒ–ï¼ˆèº«é«˜ã€ä½“å‹ç­‰ï¼‰ã€‚
- **è¡¨æƒ…å‚æ•°ï¼ˆExpression Parametersï¼‰**: ç»´åº¦ **(10,)** æˆ– **(50,)**ï¼Œç”¨äºæ§åˆ¶é¢éƒ¨è¡¨æƒ…å˜åŒ–ï¼ˆå˜´å·´å¼ å¼€ã€çš±çœ‰ç­‰ï¼‰ã€‚

### **2. å§¿æ€å‚æ•°ï¼ˆPose Parametersï¼‰**

- **Î¸ï¼ˆposeï¼‰**: ç»´åº¦ **(3 Ã— 55,)**ï¼Œè¡¨ç¤ºå…¨èº«éª¨éª¼çš„æ—‹è½¬ï¼ˆåŒ…æ‹¬èº¯å¹²ã€å››è‚¢ã€æ‰‹æŒ‡å’Œé¢éƒ¨ï¼‰ã€‚
  - **å…¨å±€æ—‹è½¬ï¼ˆGlobal Orientationï¼‰**: ç»´åº¦ **(3,)**ï¼Œè¡¨ç¤ºæ•´ä¸ªèº«ä½“çš„æ—‹è½¬ã€‚
  - **èº«ä½“å…³èŠ‚æ—‹è½¬ï¼ˆBody Poseï¼‰**: ç»´åº¦ **(3 Ã— 21,)**ï¼Œè¡¨ç¤ºèº«ä½“ä¸»è¦å…³èŠ‚çš„æ—‹è½¬ã€‚
  - **æ‰‹éƒ¨æ—‹è½¬ï¼ˆHand Poseï¼‰**: ç»´åº¦ **(3 Ã— 15 Ã— 2,)**ï¼Œè¡¨ç¤ºå·¦å³æ‰‹æ‰‹æŒ‡çš„å§¿æ€ã€‚
  - **é¢éƒ¨æ—‹è½¬ï¼ˆFace Poseï¼‰**: ç»´åº¦ **(3 Ã— 3,)**ï¼Œè¡¨ç¤ºå¤´éƒ¨å’Œçœ¼ç›çš„æ—‹è½¬ã€‚

### å…³èŠ‚ï¼ˆJointsï¼‰

- **J_regressor**: ä¸€ä¸ªç”¨äºä»é¡¶ç‚¹å›å½’å¾—åˆ°å…³èŠ‚ä½ç½®çš„çŸ©é˜µã€‚
- **NUM_JOINTS**: SMPL-X åŒ…å« **55 ä¸ªå…³èŠ‚**ï¼ˆåŒ…æ‹¬æ‰‹éƒ¨å’Œè„¸éƒ¨ï¼‰ã€‚

å…¶ä¸­ï¼š

- **æ—‹è½¬å‚æ•°ï¼ˆ`\*_pose`ï¼‰** ä½¿ç”¨ **è½´è§’ï¼ˆAxis-Angleï¼‰** æˆ– **æ—‹è½¬çŸ©é˜µ** è¡¨ç¤ºï¼Œæ¯ä¸ªå…³èŠ‚ 3 ç»´åº¦ã€‚
- **å½¢çŠ¶å‚æ•°ï¼ˆ`betas`ï¼‰** æ˜¯ PCA åˆ†è§£å¾—åˆ°çš„å‚æ•°ï¼Œé€šå¸¸å–å‰ 10 ä¸ªæˆ– 300 ä¸ªã€‚
- **è¡¨æƒ…å‚æ•°ï¼ˆ`expression`ï¼‰** ä¹Ÿæ˜¯ PCA å½¢å¼çš„ä½ç»´è¡¨è¾¾ï¼Œé€šå¸¸å– 10 ç»´ã€‚



#### ğŸ”¹ `A: Optional[Tensor]`

- **å½¢çŠ¶ï¼š** `(B, 55, 4, 4)`
- **ä½œç”¨ï¼š** æ¯ä¸ªå…³èŠ‚çš„å˜æ¢çŸ©é˜µï¼ˆfrom canonical pose to posedï¼‰
- **è¯´æ˜ï¼š**
  - è¿™æ˜¯çº¿æ€§è’™çš®ï¼ˆLBSï¼‰ä¸­ç”¨åˆ°çš„éª¨éª¼çŸ©é˜µã€‚
  - å®ƒè¡¨ç¤ºæ¯ä¸ªå…³èŠ‚åœ¨éª¨éª¼å±‚çº§ç»“æ„ä¸­çš„ä¸–ç•Œç©ºé—´ä½å§¿ï¼ˆrigid transformï¼‰ã€‚
  - åœ¨è’™çš®æ—¶ç”¨ä½œæƒé‡ä¹˜ç§¯çš„å˜æ¢çŸ©é˜µã€‚

## LBS

- é¡¶ç‚¹ã€å½¢çŠ¶ä¸é¢ç‰‡

| å‚æ•°å       | å½¢çŠ¶            | è¯´æ˜                                                         |
| ------------ | --------------- | ------------------------------------------------------------ |
| `v_template` | (10475, 3)      | æ¨¡å‹åœ¨é»˜è®¤ T pose ä¸‹çš„é¡¶ç‚¹ä½ç½®                               |
| `shapedirs`  | (10475, 3, 400) | å½¢çŠ¶ blend shapesï¼Œæ§åˆ¶ä½“å‹å˜å½¢å’Œé¢éƒ¨è¡¨æƒ…ï¼ˆå‰300ç»´ä¸ºshapeå‚æ•°ï¼Œå100ç»´ä¸ºespressionå‚æ•°ï¼‰ |
| `posedirs`   | (10475, 3, 486) | pose blend shapesï¼ˆéª¨éª¼å§¿æ€å¼•èµ·çš„å½¢å˜ï¼‰                      |
| `weights`    | (10475, 55)     | LBS æƒé‡ï¼Œæ¯ä¸ªé¡¶ç‚¹å¯¹æ¯ä¸ªå…³èŠ‚çš„å½±å“æƒé‡                       |
| `f` æˆ– `ft`  | (20908, 3)      | ç½‘æ ¼é¢ç´¢å¼•ï¼ˆä¸‰è§’é¢ç‰‡ï¼Œæ¯ä¸ªæ˜¯ä¸‰ä¸ªé¡¶ç‚¹çš„ç´¢å¼•ï¼‰                 |

------

`v_template`, `shapedirs`, `posedirs` ç»“åˆ `shape`, `pose`, `expression` å‚æ•°é€šè¿‡ **LBSï¼ˆLinear Blend Skinningï¼‰** å°±å¯ä»¥ç”Ÿæˆæœ€ç»ˆçš„å§¿æ€ç½‘æ ¼ã€‚

`f` å’Œ `ft` æ˜¯ä¸‰è§’é¢ç‰‡é¡¶ç‚¹ç´¢å¼•ï¼Œé€šå¸¸æ˜¯ä¸€æ ·çš„ï¼Œå‘½åä¸åŒï¼ˆæœ‰æ—¶ `f` æ˜¯åŸå§‹é¢ï¼Œ`ft` æ˜¯å¸¦ texture çš„é¢ï¼‰ã€‚

`posedirs` æœ€åä¸€ç»´æ˜¯486ï¼ŒSMPL-X ä¸€å…±æœ‰ **55 ä¸ªå…³èŠ‚**ï¼Œå‡å»root å…³èŠ‚ï¼Œæ¯ä¸ªå…³èŠ‚æœ‰ **3 ä¸ªæ—‹è½¬è‡ªç”±åº¦ï¼ˆ3Ã—3 çš„æ—‹è½¬çŸ©é˜µ - Iï¼‰** : (55 - 1) Ã— 9 = 486



- éª¨æ¶ä¸å…³èŠ‚

| å‚æ•°å          | å½¢çŠ¶           | è¯´æ˜                                                    |
| --------------- | -------------- | ------------------------------------------------------- |
| `J_regressor`   | (55, 10475)    | å›å½’çŸ©é˜µï¼šç”¨æ¥ä»é¡¶ç‚¹ä½ç½®è®¡ç®— 55 ä¸ªå…³èŠ‚ä½ç½®ï¼ˆJ = R @ Vï¼‰ |
| `kintree_table` | (2, 55)        | å…³èŠ‚çš„çˆ¶å­å…³ç³»ï¼Œç¬¬ 0 è¡Œæ˜¯å­èŠ‚ç‚¹ï¼Œç¬¬ 1 è¡Œæ˜¯å¯¹åº”çš„çˆ¶èŠ‚ç‚¹  |
| `joint2num`     | scalarï¼ˆæ ‡é‡ï¼‰ | æ ‡æ˜ joint çš„æ•°é‡ï¼ˆé€šå¸¸æ˜¯ 55ï¼‰                          |
| `part2num`      | scalarï¼ˆæ ‡é‡ï¼‰ | æ ‡æ˜ body part çš„æ•°é‡ï¼ˆé€šå¸¸ç”¨äºåˆ†åŒºåŸŸè®­ç»ƒï¼‰             |

------

æ‰‹éƒ¨å‚æ•°ï¼ˆMANOæ¨¡å‹åµŒå…¥ï¼‰

| å‚æ•°å              | å½¢çŠ¶       | è¯´æ˜                                      |
| ------------------- | ---------- | ----------------------------------------- |
| `hands_componentsl` | (45, 45)   | å·¦æ‰‹ PCA basisï¼ˆæ‰‹éƒ¨ pose çš„ PCA ä¸»æˆåˆ†ï¼‰ |
| `hands_componentsr` | (45, 45)   | å³æ‰‹ PCA basis                            |
| `hands_meanl`       | (45,)      | å·¦æ‰‹ pose çš„å‡å€¼ï¼ˆä¸­å¿ƒåŒ–å‘é‡ï¼‰            |
| `hands_meanr`       | (45,)      | å³æ‰‹ pose çš„å‡å€¼                          |
| `hands_coeffsl`     | (1554, 45) | å·¦æ‰‹ pose çš„ PCA ç³»æ•°æ˜ å°„çŸ©é˜µï¼ˆç”¨äºæŠ•å½±ï¼‰ |
| `hands_coeffsr`     | (1554, 45) | å³æ‰‹åŒä¸Š                                  |

> ç”¨è¿™äº›å¯ä»¥å°†æ‰‹éƒ¨ pose ä» 45 ç»´ PCA è¡¨è¾¾æ¢å¤æˆ 15 å…³èŠ‚ Ã— 3 ç»´çš„æ—‹è½¬è¡¨ç¤ºã€‚

------

é¢éƒ¨ä¸åŠ¨æ€ landmark æ”¯æŒ

| å‚æ•°å                    | å½¢çŠ¶       | è¯´æ˜                                           |
| ------------------------- | ---------- | ---------------------------------------------- |
| `lmk_faces_idx`           | (51,)      | é™æ€ landmark å¯¹åº”çš„ mesh é¢ç´¢å¼•               |
| `lmk_bary_coords`         | (51, 3)    | æ¯ä¸ª landmark åœ¨å…¶é¢ä¸Šçš„ barycentric åæ ‡      |
| `dynamic_lmk_faces_idx`   | (79, 17)   | åŠ¨æ€ landmark æ‰€åœ¨çš„é¢ç´¢å¼•ï¼ˆéšè§†è§’æˆ–è¡¨æƒ…å˜åŒ–ï¼‰ |
| `dynamic_lmk_bary_coords` | list       | æ¯ä¸ª landmark å¯¹åº”çš„ barycentric åæ ‡ï¼ˆåŠ¨æ€ï¼‰  |
| `vt`                      | (11313, 2) | UV åæ ‡ï¼Œtexture mapping ç”¨                    |

## MANOæ‰‹éƒ¨æ¨¡å‹